\chapter{Аналитическая часть}

\begin{comment}
\section{ЧерновЯчок}

На рисунке \ref{img:worm} представлен Червячок (талисман этого курсача) для
повышения настрения при написании данной работы.

\img{5cm}{worm}{Просто червячок, чтобы не было грустно}{worm}

А дальше тут просто черновые записи, а то они сливаются.

\subsection{Про анализ области}

На специализированных сайтах ...

Каждый магазин представляет свои анонсы.

Как правило, анонс игротеки включает: 

Добавим туда ещё и организатора.

Предоставляется возможность регистрации через гугл формы. Необходимость
интеграции --- необходимость введения игрока.

Игротека проводится организатором (магазином) в каком-то месте (кафе, антикафе,
ресторане и тп). На ней представлена одна или несколько игр, в которые можно
поиграть. Часто организаторы предоставляют возможность покупки тех же игр прямо
на месте или возможность сделать заказ.

\textbf{\texttt{Анализ}} страниц сайтах об игротеках показал, что
\textbf{\texttt{обычно}} информация об игротеке включает дату, время начала,
продолжительность или время окончания, адрес проведения и стоимость участия.
Также представляется набор игр, по которым проводится игротека.

Информация об играх 
\end{comment}

В данном разделе проводится анализ предметной области: на основе рассмотрения
существующих решений делаются выводы о представлении информации о настольных
играх и игротеках, а также о необходимых возможностях пользователей. На базе
анализа предметной области формулируются требования к информационной системе,
формализуются данные и типы пользователей. Также проводится сравнение
существующих моделей баз данных и систем управления базами данных, из которых
выбираются оптимальные для решения поставленной задачи.

\section{Анализ существующих аналогов}

В силу молодости рынка настольных игр анализ предметной области проводится на
основе рассмотрения программных решений, представляющих интернет-магазины
крупных компаний настольных игр или тематических сайтов.

Так как рынки настольных игр в России и за рубежом имеют разные уровни развития
существующие программные решения рассматриваются отдельно для российского и
зарубежного рынков.

\subsection{Российский рынок}

На российском рынке программные решения в сфере настольных игр представлены
интернет-магазинами крупных продавцов: Hobby Games~\cite{site01},
<<Мосигра>>~\cite{site02}, <<Низа Гамс>>~\cite{site03} и др. Их веб-сайты
ориентированы именно на продажу игр, в то время как анонсы игротек являются
второстепенными и располагаются либо в специлизированном разделе сайта, либо в
новостях, при этом регистрация проходит либо через сторонний сервис, либо через
сообщения в социальных сетях.

\subsection{Зарубежный рынок}

На зарубежном рынке преобладают тематические сайты. Например,
BoardGameGeek~\cite{site04} --- многофункциональный сайт для любителей
настольных игр, --- содержит информацию о многочисленных настольных играх, их
авторах, предоставляет ссылки на интернет-магазины, в которых можно купить игру,
а также возможность продать свою игру и пообщаться на форуме. Данный сайт также
содежит страницу с акутальными данными по игровым конференциям всего мира, на
которых проводятся игротеки. Аналогичными проектами, но с меньшими наборами
фукнций являются Top Tier Board Games~\cite{site05} и Board Game
Halv~\cite{site06}, они представляют информацию о настольных играх и игротеках в
формате новостей.

Существует также программное решение, предоставляющее возможность играть в
популярные настольные игры онлайн --- Board Game Arena~\cite{site07}. Здесь
реализованы виртуальные копии многих настольных игр, ведутся рейтинги по каждой
игре и по всем играм в целом. Благодаря возможности перевода сайта
пользователями, он доступен на нескольких языках, в том числе и на русском.

\subsection*{Вывод}

Таким образом, программные решения для поиска информации о настольных играх
широко распространены, однако решение задачи поиска необходимой игротеки для
игрока требует многих усилий. Если организаторы игротек, используя свои сайты,
имеют возможность в любом удобном для них формате выкладывать информацию об
игротеках, то для поиска нужной игротеки игроку придется посетить многочисленные
сайты организаторов, найти раздел или страницу игротек на каждом из них и
зарегистрироваться через сторонний ресурс.

То есть встает необходимость реализации информационной системы, в которой
информация о всех игротеках будет собрана в одном месте, а регистрация будет
происходить единообразно в самой системе. При этом в данной системе должна
содержатся информация о настольных играх, так как на их основе происходит выбор
игротеки. А в силу того, что реализация регистрации на игротеки, потребует
регистрации в системе, как организаторов, так и игроков, появится возможность
включения в систему рейтинговых списков.

\section{Формализация задачи}

Для создания информационной системы необходимо формализовать процесс проведения
игротеки. Для этого выделим необходимые и возможные действия пользователей,
которые будут сооветствовать требованиям, предъявляемым к
создаваемому программному обеспечению.

И так, при проведении игротеки сначала организатор:
\begin{enumerate}[label=\arabic*)]
    \item выбирает время и место проведения игротеки, а также настольные игры,
      по которым она проводится;
    \item определяет другие характеристики игротеки (название,
        продолжительность, стоимость участия, возможность купить игры);
    \item регистрирует игротеку.
\end{enumerate}

Далее игрок --- участник игротеки:
\begin{enumerate}[label=\arabic*)]
    \item просматривает список настольных игр;
    \item выбирает понравившиеся игры, добавляя их в свой список избранных;
    \item выбирает игротеку по понравившимся играм или из всего списка
        зарегистрированных игротек;
    \item регистрируется на игротеку.
\end{enumerate}

При этом игрок может пропустить этапы просмотра и выбора настольных игр и
сразу перейти к выбору игротеки.

Описанные выше действия субъектов игротеки соответствуют необходимым функциям,
которые являются обязательными требованиями к разрабатываемой информационной
системе и должны быть реализованы в первую очередь. Также различия в возможных
действиях пользователей формируют еще одно обязательное требование: регистрацию
различных типов пользователей в системе.

Также у организатора должна быть возможность:
\begin{itemize}
    \item просмотреть список участников, зарегистрированных на игротеку;
    \item отменить игротеку;
    \item перенести игротеку (изменить место проведения или время начала);
    \item изменить другую информацию о ней;
    \item сформировать заявку на добавление в базу места проведения или
        настольной игры при их отсутствии.
\end{itemize}

\clearpage
Игрок, в свою очередь, должен иметь возможность:
\begin{itemize}
    \item удалить игру из списка понравившихся игр;
    \item отменить регистрацию на игротеку.
\end{itemize}

Данные требования являются желательными и реализуются сразу после обязательных.
 
Возможными требования к реализуемой системе являются:
\begin{itemize}
    \item подтвержение организатором посещения игроком игротеки;
    \item изменение организатором рейтинга игрока после посещения им игротеки;
    \item уменьшение рейтинга игрока вследствие пропуска игротеки, на которую он
        был зарегистрирован;
    \item оценка игроком посещенной игротеки и организатора.
\end{itemize}

Также при реализации необходимо учесть ряд правил делового регламента:
\begin{itemize}
    \item организатор не может зарегистрировать игротеку, дата и время начала
        которой прошли или соответствуют текущему дню;
    \item игротека считается прошедшей, если наступила дата проведения и время
        ее окончания;
    \item игрок не может зарегистрироваться на прошедшую или отмененную
        игротеку;
    \item игрок может зарегистрироваться на игротеку не позднее, чем за
        установленное организатором время до ее начала;
    \item при отмене игротеки список зарегистрированных на нее участников
        сохраняется;
    \item регистрация игротеки считается незавершенной до тех пор, пока не будут
        приняты заявки организатора на добавление в базу места проведения и хотя
        бы одной игры, если такие оформлялись.
\end{itemize}

Таким образом, необходимо разработать приложение, отвечающее выше перечисленным
требованиям. В силу необходимости хранения информации о различных объектах
предметной области также требуется спроектировать и реализовать базу данных,
которая должна хранить инфрмацию о настольных играх и игротеках, и
взаимодействие с которой должно осуществляться с помощью интерфейса
разрабатываемого приложения.

\section{\label{head:01}Формализация данных}

На основании сформулированных требований база данных должна содержать информацию
о:

\begin{itemize}
    \item игротеках;
    \item настольных играх, по которым проводятся игротеки;
    \item организаторах;
    \item местах проведения;
    \item игроках;
    \item пользователях.
\end{itemize}

Последние четыре сущности характерны для многих предметных областей, поэтому для
них приведено только краткое описание, а подробный анализ приводится для первых
двух сущностей, являющихся основными в рассматриваемой предметной области.

На основе анализа существующих решений можно выявить основные сведения о
настольных играх и игротеках, которые используются при их описании. Так, для
описания настольной игры используют следующие характеристики:

\begin{itemize}
    \item название;
    \item производитель;
    \item год выпуска;
    \item возможное количество игроков в формате <<от ... до ...>>;
    \item время игры также в формате <<от ... до ...>>;
    \item рекомендованный возраст участников в формате возрастных категорий
        (<<6+>>, <<12+>>, <<18+>> и т.~п.) или диапазона возрастов
        (<<от~...~до~...>>);
\end{itemize}

Также возможно использование следующих характеристик:
\begin{itemize}
    \item вес;
    \item комплектация;
    \item правила в виде отдельного файла;
    \item описание игры;
    \item изображения коробки и комплектующих.
\end{itemize}

Так как по сформулированным требованиям настольные игры используются для поиска
необходимых игротек, последние описанные характеристики в сущность настольной
игры включены не будут.

\clearpage
Для описания игротеки в рассмотренных решениях используются:
\begin{itemize}
    \item название;
    \item адрес места проведения;
    \item время начала и продолжительность;
    \item стоимость участия;
    \item ссылка на регистрацию.
\end{itemize}

Так как регистрация на игротеку будет происходить в самой системе, ссылка на
регистрацию, как сведение об игротеке храниться не будет, но в соответствии с
сформулированными требованиями будет добавлено время, за которое можно
зарегистрироваться на игротеку.

В таблице~\ref{tab:01} представлены краткие сведения обо всех выше описанных
категорий данных.

\begin{table}[h!]
    \begin{center}
    \begin{threeparttable}
        \captionsetup{format=hang,justification=raggedright,
                      singlelinecheck=off}
        \caption{\label{tab:01}Категории данных и сведения о них}
        \renewcommand{\arraystretch}{1.5}
        \begin{tabular}{|p{4cm}|p{12cm}|}
            \hline
            \bfseries Категория & \bfseries Сведения\\
            \hline
            \begin{minipage}[t]{\linewidth}
              \begin{multicols}{1}
                \begin{itemize}[leftmargin=0mm,labelsep=0mm,nosep,after=\strut]
                  \item[] Игротека
                  \item[]
                  \item[]
                  \item[]
                  \item[]
                  \item[]
                  \item[]
                  \item[]
                  \item[]
                \end{itemize}
              \end{multicols}
            \end{minipage}
          & \begin{minipage}[t]{\linewidth}
              \begin{multicols}{2}
                \begin{itemize}[leftmargin=0mm,labelsep=0mm,nosep,after=\strut]
                  \item[] ID
                  \item[] Название
                  \item[] Организатор
                  \item[] Время начала
                  \item[] Дата проведения
                  \item[] Возможность покупки игр
                  \item[] Место проведения
                  \item[] Продолжительность
                  \item[] Стоимость участия
                  \item[] Время регистрации
                \end{itemize}
              \end{multicols}
            \end{minipage}\\
            \hline
            \begin{minipage}[t]{\linewidth}
              \begin{multicols}{1}
                \begin{itemize}[leftmargin=0mm,labelsep=0mm,nosep,after=\strut]
                  \item[] Организатор
                  \item[]
                  \item[]
                  \item[]
                  \item[]
                \end{itemize}
              \end{multicols}
            \end{minipage}
          & \begin{minipage}[t]{\linewidth}
              \begin{multicols}{2}
                \begin{itemize}[leftmargin=0mm,labelsep=0mm,nosep,after=\strut]
                  \item[] ID
                  \item[] Название
                  \item[] Адрес
                  \item[] Сайт
                  \item[] Email
                  \item[] Телефон
                \end{itemize}
              \end{multicols}
            \end{minipage}\\
            \hline
            \begin{minipage}[t]{\linewidth}
              \begin{multicols}{1}
                \begin{itemize}[leftmargin=0mm,labelsep=0mm,nosep,after=\strut]
                  \item[] Место 
                  \item[] проведения
                  \item[]
                  \item[]
                  \item[]
                  \item[]
                  \item[]
                \end{itemize}
              \end{multicols}
            \end{minipage}
          & \begin{minipage}[t]{\linewidth}
              \begin{multicols}{2}
                \begin{itemize}[leftmargin=0mm,labelsep=0mm,nosep,after=\strut]
                  \item[] ID
                  \item[] Адрес
                  \item[] Сайт
                  \item[] Название
                  \item[] Тип
                  \item[] Email
                  \item[] Телефон
                \end{itemize}
              \end{multicols}
            \end{minipage}\\
            \hline
            \begin{minipage}[t]{\linewidth}
              \begin{multicols}{1}
                \begin{itemize}[leftmargin=0mm,labelsep=0mm,nosep,after=\strut]
                  \item[] Настольная
                  \item[] игра
                  \item[]
                  \item[]
                  \item[]
                  \item[]
                  \item[]
                  \item[]
                  \item[]
                \end{itemize}
              \end{multicols}
            \end{minipage}
          & \begin{minipage}[t]{\linewidth}
              \begin{multicols}{2}
                \begin{itemize}[leftmargin=0mm,labelsep=0mm,nosep,after=\strut]
                  \item[] ID
                  \item[] Название
                  \item[] Производитель
                  \item[] Год выпуска
                  \item[] Мин. число игроков
                  \item[] Макс. число игроков
                  \item[] Мин. возраст
                  \item[] Макс. возраст
                  \item[] Мин. время игры
                  \item[] Макс. время игры
                \end{itemize}
              \end{multicols}
            \end{minipage}\\
            \hline
            \begin{minipage}[t]{\linewidth}
              \begin{multicols}{1}
                \begin{itemize}[leftmargin=0mm,labelsep=0mm,nosep,after=\strut]
                  \item[] Игрок
                  \item[]
                  \item[]
                \end{itemize}
              \end{multicols}
            \end{minipage}
          & \begin{minipage}[t]{\linewidth}
              \begin{multicols}{2}
                \begin{itemize}[leftmargin=0mm,labelsep=0mm,nosep,after=\strut]
                  \item[] ID
                  \item[] Имя
                  \item[] Лига
                  \item[] Рейтинг
                \end{itemize}
              \end{multicols}
            \end{minipage}\\
            \hline
            \begin{minipage}[t]{\linewidth}
              \begin{multicols}{0}
                \begin{itemize}[leftmargin=0mm,labelsep=0mm,nosep,after=\strut]
                  \item[] Пользователь
                  \item[]
                  \item[]
                  \item[]
                \end{itemize}
              \end{multicols}
            \end{minipage}
          & \begin{minipage}[t]{\linewidth}
              \begin{multicols}{2}
                \begin{itemize}[leftmargin=0mm,labelsep=0mm,nosep,after=\strut]
                  \item[] ID
                  \item[] Роль
                  \item[] Логин
                  \item[] Пароль
                \end{itemize}
              \end{multicols}
            \end{minipage}\\
           \hline
        \end{tabular}
    \end{threeparttable}
    \end{center}
\end{table} 

\section{Описание типов пользователей}

В соответствии с поставленными требованиями необходимо выделить 4~типа
пользователей, описание которых представлено в таблице~\ref{tab:02}.

\begin{table}[h!]
    \begin{center}
    \begin{threeparttable}
        \captionsetup{format=hang,justification=raggedright,
                      singlelinecheck=off}
        \caption{\label{tab:02}Описание типов пользователей}
        \renewcommand{\arraystretch}{1.5}
        \begin{tabular}{|p{5.1cm}|p{11.3cm}|}
            \hline
            \bfseries Тип &
            \bfseries Функциональность\\
            \hline
            Гость \par (неавторизированный пользователь)
                  & \begin{minipage}[t]{\linewidth}
                      \begin{itemize}[nosep,after=\strut]
                        \item Просмотр списка настольных игр и игротек
                        \item Поиск игротек по настольной игре
                        \item Авторизация
                        \item Регистрация
                      \end{itemize}
                  \end{minipage}\\
            \hline
            Игрок \par (авторизированный пользователь)
                  & \begin{minipage}[t]{\linewidth}
                      \begin{itemize}[nosep,after=\strut]
                          \item Просмотр списка настольных игр и игротек
                          \item Составление списка предпочитаемых игр
                          \item Поиск игротек по настольным играм 
                          \item Регистрация на игротеки и ее отмена
                      \end{itemize}
                  \end{minipage}\\
            \hline
            Организатор \par (авторизированный пользователь)
                  & \begin{minipage}[t]{\linewidth}
                      \begin{itemize}[nosep,after=\strut]
                          \item Просмотр списка настольных игр, игротек, мест
                        проведения
                          \item Регистрация новых игротек и их отмена
                          \item Изменение информации о зарегистрированных
                              игротеках
                          \item Просмотр списка зарегистрированных на
                              \mbox{игротеку} участников
                          \item Формирование заявки на добавление нового
                              \mbox{места} проведения при его отсутствии в базе
                          \item Формирование заявки на добавление игры при ее
                        отсутствии в базе
                      \end{itemize}
                  \end{minipage}\\
            \hline
            Администратор \par (авторизированный пользователь
                    с \mbox{повышенным~~уровнем} полномочий)
                  & \begin{minipage}[t]{\linewidth}
                      \begin{itemize}[nosep,after=\strut]
                          \item Просмотр списка настольных игр, игротек, мест
                        проведения, организаторов, пользователей
                    \item Изменение информации о настольных играх, \mbox{местах}
                        проведения, организаторах, игротеках
                          \item Одобрение или отклонение заявок от
                              \mbox{организаторов}
                          \item Изменение прав доступа пользователей
                          \item Удаление пользователей
                      \end{itemize}
                  \end{minipage}\\
            \hline
        \end{tabular}
    \end{threeparttable}
    \end{center}
\end{table} 


\section{Выбор модели базы данных}

На основании сформулированных требований система должна включать базу данных для
хранения информации обо всех сущностях, описанных в подразделе~\ref{head:01}.

База данных --- это совокупность данных, организованных по определенным
правилам, предусматривающим общие принципы описания, хранения и манипулирования
данными, независимая от прикладных программ~\cite{gost01}.

Основой любой базы данных является модель данных --- формализованное описание
структур единиц информации и операций над ними в информационной системе.
Модель данных определяет логическую структуру базы данных, то есть
способ хранения, организации и обработки информации~\cite{book01}.

Существуют различные модели данных, каждая из которых имеет свои достоинства и
недостатки, поэтому необходимо провести анализ моделей и выбрать модель базы
данных, соответствующая модель данных которой наиболее полно удовлетворяет
требованиям реализуемой системы.

Модели баз данных можно разделить на две основные категории: реляционные и
нереляционные.

\subsection{Реляционные базы данных}

\subsection{Нереляционные базы данных}

\subsection*{Вывод}

\section{Выбор системы управления базами данных}

Система управления базами данных --- это совокупность программ и языковых
средств, предназначенных для управления данными в базе данных, ведения базы
данных и обеспечения взаимодействия ее с прикладными программами~\cite{gost01}.

Выбор пал на реляционные => рассмотрим основные СУБД, предоставляющие
возможность работы с ними.

\subsection{MySQL}

\subsection{PostgreSQL}

\subsection{Oracle}

\subsection*{Вывод}

Выбираю PostgreSQL, потому что я умею с ним работать :)

\section*{Вывод}
